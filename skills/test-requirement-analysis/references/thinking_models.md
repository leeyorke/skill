# 测试分析高级思维模型

## 麦肯锡问题解决框架

### 1. MECE (互斥且完全穷尽)

**在测试中的应用:**
确保测试覆盖完整且无冗余。

**示例 - API参数测试:**
```
请求参数(MECE分类):
├── 必填参数
│   ├── 有效值(正常路径)
│   ├── 无效格式
│   ├── 无效类型
│   └── 缺失
├── 可选参数
│   ├── 存在且值有效
│   ├── 存在但值无效
│   └── 不存在
└── 额外/未知参数
    ├── 额外的有效参数
    └── 无效的参数名称
```

### 2. 议题树(逻辑树)

**在测试中的应用:**
将复杂功能分解为可测试的组件。

**示例 - 电商结账:**
```
结账流程测试
├── 购物车验证
│   ├── 商品可用性
│   ├── 数量限制
│   └── 价格准确性
├── 支付处理
│   ├── 支付方式选择
│   ├── 交易验证
│   └── 支付网关集成
├── 订单确认
│   ├── 订单ID生成
│   ├── 邮件通知
│   └── 数据库持久化
└── 错误处理
    ├── 网络失败
    ├── 支付失败
    └── 系统错误
```

### 3. 假设驱动测试

**流程:**
1. 形成关于潜在缺陷的假设
2. 设计测试以证明/反驳假设
3. 分析结果
4. 完善假设

**示例:**
```
假设:"系统在处理>1000个并发请求时会失败"
测试:
- 500个并发请求 → 通过
- 1000个并发请求 → 通过
- 1500个并发请求 → 失败(超时)
- 1200个并发请求 → 失败(超时)
结论:系统在1000-1200个并发请求之间崩溃
```

### 4. 5个为什么根因分析

**在缺陷分析中的应用:**
```
缺陷:用户无法登录
为什么? → 认证token过期
为什么? → Token TTL设置为5分钟
为什么? → 默认配置未更新
为什么? → 缺少配置管理流程
为什么? → 不存在部署检查清单
根本原因:缺少部署验证流程
测试缺口:需要配置验证测试
```

### 5. 2x2优先级矩阵(艾森豪威尔矩阵)

**测试用例优先级划分:**
```
               高影响
                    │
    严重/紧急       │    重要/不紧急
    (P0)            │    (P1)
────────────────────┼────────────────
    不重要/紧急     │    低优先级
    (P2)            │    (P3)
                    │
               低影响
```

**标准:**
- 影响:业务价值、用户覆盖、数据完整性风险
- 紧急性:发布截止日期、回归风险、依赖阻塞

## 高级测试设计技术

### 等价类划分

将输入域划分为等价类。

**示例 - 年龄验证(有效:18-65):**
```
无效类1: age < 18  → 测试:17
有效类:    18 ≤ age ≤ 65 → 测试:30
无效类2: age > 65  → 测试:66
```

### 边界值分析

在等价类的边界处进行测试。

**示例 - 同样的年龄验证:**
```
下边界:17(无效)、18(有效)、19(有效)
上边界:64(有效)、65(有效)、66(无效)
```

### 决策表测试

**示例 - 贷款审批:**
```
条件:
C1:信用分数 ≥ 700
C2:收入 ≥ $50,000
C3:就业 ≥ 2年

规则 | C1 | C2 | C3 | 结果
-----|----|----|----|---------
  1  | T  | T  | T  | 批准
  2  | T  | T  | F  | 审核
  3  | T  | F  | T  | 审核
  4  | F  | T  | T  | 拒绝
  5  | T  | F  | F  | 拒绝
  6  | F  | T  | F  | 拒绝
  7  | F  | F  | T  | 拒绝
  8  | F  | F  | F  | 拒绝
```

### 状态转换测试

**示例 - 订单状态:**
```
状态:[草稿、已提交、已批准、已发货、已送达、已取消]

有效转换:
草稿 → 已提交
已提交 → 已批准 | 已取消
已批准 → 已发货 | 已取消
已发货 → 已送达

无效转换(需测试):
草稿 → 已批准
已发货 → 已提交
已送达 → 已取消
```

### 成对测试(全对偶)

减少测试组合同时保持覆盖。

**示例 - 浏览器/操作系统测试:**
```
完全组合:4个浏览器 × 3个操作系统 = 12个测试
成对测试:6个测试覆盖所有配对

测试 | 浏览器  | 操作系统
-----|---------|-------
  1  | Chrome  | Windows
  2  | Firefox | macOS
  3  | Safari  | macOS
  4  | Edge    | Windows
  5  | Chrome  | Linux
  6  | Firefox | Windows
```

## 风险驱动测试框架

### 风险评估矩阵

```
风险 = 概率 × 影响

概率级别:
- 高(3):经常发生
- 中(2):偶尔发生
- 低(1):罕见发生

影响级别:
- 高(3):系统严重故障、数据丢失
- 中(2):功能降级
- 低(1):轻微不便

风险分数 = P × I(范围:1-9)
优先级:7-9=严重,4-6=高,2-3=中,1=低
```

### 测试覆盖模型

**语句覆盖:**每行代码至少执行一次

**分支覆盖:**每个决策结果(真/假)都被测试

**路径覆盖:**所有可能的执行路径都被测试

**数据流覆盖:**变量定义和使用都被测试

## 实际应用模板

**对于任何给定的需求:**

1. **分解** - 使用MECE/议题树
2. **识别** - 等价类和边界
3. **映射** - 状态转换(如适用)
4. **评估** - 风险并优先排序
5. **应用** - 适当的测试设计技术
6. **生成** - 带有明确预期结果的测试用例
7. **审查** - 隐性条件和边缘情况